(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{25:function(e,t,a){e.exports=a(40)},30:function(e,t,a){},31:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(21),o=a.n(i),s=(a(30),a(31),a(3)),c=a(1),r=a(8),u=a(9),m=a(7),p=a(11),d=a(10),h=(a(32),a(22)),g=a.n(h),f=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).fetchQuestionsList=function(){console.log(n.state.currentPage),fetch("/api/v1/questions?page="+n.state.currentPage).then((function(e){return e.json()})).then((function(e){var t=e.questions;console.log(t),console.log(t.slice(n.state.offset,n.state.offset+n.state.perPage)),n.setState({questions:e.questions,pageCount:e.question_count})})).catch((function(e){n.setState({questions:"API Failed"})}))},n.handleDelete=function(e){fetch("/api/v1/questions/".concat(e),{method:"delete"}).then((function(e){alert("Question deleted successfully"),n.fetchQuestionsList()}))},n.handlePageClick=function(e){var t=e.selected,a=t*n.state.perPage;n.setState({currentPage:t,offset:a},(function(){n.fetchQuestionsList()}))},n.state={questions:[],pageCount:1,offset:0,data:[],perPage:5,currentPage:0,page:0},n.handlePageClick=n.handlePageClick.bind(Object(m.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.fetchQuestionsList()}},{key:"render",value:function(){var e=this,t=this.state.questions;return l.a.createElement("div",{className:"button__container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-9"},l.a.createElement("h3",null,"Questions")),l.a.createElement("div",{className:"col-md-3"},l.a.createElement(s.b,{to:"/questions/new"},l.a.createElement("button",{type:"button",className:"btn btn-primary button"},"Add Question")))),l.a.createElement("table",{className:"table table-striped"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Question"),l.a.createElement("th",null,"Role"),l.a.createElement("th",null,"Mapping"),l.a.createElement("th",null,"Show"),l.a.createElement("th",null,"Edit"),l.a.createElement("th",null,"Delete"))),l.a.createElement("tbody",{id:"table-data"},t.map((function(t,a){return l.a.createElement("tr",{key:t.id},l.a.createElement("td",null,l.a.createElement(s.b,{to:"/questions/".concat(t.id)},t.name)),l.a.createElement("td",null,t.role_name),l.a.createElement("td",null,t.mapping_name),l.a.createElement("td",null,l.a.createElement(s.b,{to:"/questions/".concat(t.id),className:"btn btn-info"},"Show")),l.a.createElement("td",null,l.a.createElement(s.b,{to:"/questions/".concat(t.id,"/edit"),className:"btn btn-success"},"Edit")),l.a.createElement("td",null,l.a.createElement("button",{className:"btn btn-danger",onClick:function(){return e.handleDelete(t.id)}},"Delete")))})))),l.a.createElement("div",{align:"center"},l.a.createElement(g.a,{previousLabel:"prev",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:this.state.pageCount,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:this.handlePageClick,containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"})))}}]),a}(l.a.Component),E=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={question:{}},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;fetch("/api/v1/questions/".concat(t)).then((function(e){return e.json()})).then((function(t){return e.setState({question:t})}))}},{key:"render",value:function(){var e=this.state.question;return l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("label",null," Question "),l.a.createElement("p",null," ",e.name," ")),l.a.createElement("div",null,l.a.createElement("label",null," Role "),l.a.createElement("p",null," ",e.role_name," ")),l.a.createElement("div",null,l.a.createElement("label",null,"Mapping"),l.a.createElement("p",null," ",e.mapping_name," ")),l.a.createElement("div",null,l.a.createElement(s.b,{to:"/",className:"btn btn-default"},"Back")))}}]),a}(l.a.Component),v=a(13),b=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){n.setState(Object(v.a)({},e.target.name,e.target.value))},n.loadRoleList=function(){fetch("/api/v1/questions/fetch_roles").then((function(e){return e.json()})).then((function(e){n.setState({roles:e})})).catch((function(e){n.setState({roles:"API Failed"})}))},n.loadMappingList=function(){fetch("/api/v1/questions/fetch_mappings").then((function(e){return e.json()})).then((function(e){n.setState({mappings:e})})).catch((function(e){n.setState({mappings:"API Failed"})}))},n.createQuestionRequest=function(e){console.log("this.state",n.state),fetch("/api/v1/questions",{method:"post",body:JSON.stringify(n.state),headers:{"Content-Type":"application/json"}}).then((function(e){alert("Question created successfully")}))},n.state={name:"",role_id:"",mapping_id:"",roles:[],mappings:[]},n.handleMappingChange=n.handleMappingChange.bind(Object(m.a)(n)),n.handleRoleChange=n.handleRoleChange.bind(Object(m.a)(n)),n}return Object(u.a)(a,[{key:"handleMappingChange",value:function(e){this.setState({mapping_id:e.target.value})}},{key:"handleRoleChange",value:function(e){this.setState({role_id:e.target.value})}},{key:"componentDidMount",value:function(){this.loadRoleList(),this.loadMappingList()}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.role_id,n=e.mapping_id;return l.a.createElement("div",null,l.a.createElement("h3",null,"New Question"),l.a.createElement("form",null,l.a.createElement("div",null,l.a.createElement("label",null,"Question: "),l.a.createElement("input",{type:"text",name:"name",value:t,onChange:this.handleInputChange})),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-4"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"questions_role_id"},"Role"),l.a.createElement("select",{className:"form-control",id:"questions[role_id]",name:"question[role_id]",value:a,onChange:this.handleRoleChange},this.state.roles.map((function(e){return l.a.createElement("option",{key:e.role_id,value:e.role_id},e.role_name)})))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-4"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"questions_mapping_id"},"Mapping"),l.a.createElement("select",{className:"form-control",id:"questions[mapping_id]",name:"question[mapping_id]",value:n,onChange:this.handleMappingChange},this.state.mappings.map((function(e){return l.a.createElement("option",{key:e.mapping_id,value:e.mapping_id},e.mapping_name)})))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-4"},l.a.createElement("button",{className:"btn btn-primary",onClick:this.createQuestionRequest},"Create Question"),l.a.createElement(s.b,{to:"/",className:"btn btn-default"},"Back")))))}}]),a}(l.a.Component),_=a(24),C=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){n.setState(Object(v.a)({},e.target.name,e.target.value))},n.loadRoleList=function(){fetch("/api/v1/questions/fetch_roles").then((function(e){return e.json()})).then((function(e){n.setState({roles:e})})).catch((function(e){n.setState({roles:"API Failed"})}))},n.loadMappingList=function(){fetch("/api/v1/questions/fetch_mappings").then((function(e){return e.json()})).then((function(e){n.setState({mappings:e})})).catch((function(e){n.setState({mappings:"API Failed"})}))},n.fetchQuestion=function(){fetch("/api/v1/questions/"+JSON.stringify(Number(n.props.match.params.id))).then((function(e){return e.json()})).then((function(e){console.log(e),n.setState({question:e})})).catch((function(e){n.setState({question:"API Failed"})}))},n.updateQuestionRequest=function(e){fetch("/api/v1/questions/".concat(JSON.stringify(Number(n.props.match.params.id))),{method:"put",body:JSON.stringify(n.state),headers:{"Content-Type":"application/json"}}).then((function(e){alert("Question updated successfully")}))},n.state={name:"",role_id:"",mapping_id:"",roles:[],mappings:[]},n.handleRoleChange=n.handleRoleChange.bind(Object(m.a)(n)),n.handleMappingChange=n.handleMappingChange.bind(Object(m.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;fetch("/api/v1/questions/".concat(t)).then((function(e){return e.json()})).then((function(t){return e.setState(Object(_.a)({},t))})),this.loadRoleList(),this.loadMappingList()}},{key:"handleMappingChange",value:function(e){this.setState({mapping_id:e.target.value})}},{key:"handleRoleChange",value:function(e){this.setState({role_id:e.target.value})}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.role_id,n=e.mapping_id;return l.a.createElement("div",null,l.a.createElement("h3",null,"Edit Question"),l.a.createElement("form",null,l.a.createElement("div",null,l.a.createElement("label",null,"Question: "),l.a.createElement("input",{type:"text",name:"name",value:t,onChange:this.handleInputChange})),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-4"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"questions_role_id"},"Role"),l.a.createElement("select",{className:"form-control",id:"questions[role_id]",name:"question[role_id]",value:a,onChange:this.handleRoleChange},this.state.roles.map((function(e){return l.a.createElement("option",{key:e.role_id,value:e.role_id},e.role_name)})))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-4"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"questions_mapping_id"},"Mapping"),l.a.createElement("select",{className:"form-control",id:"questions[mapping_id]",name:"question[mapping_id]",value:n,onChange:this.handleMappingChange},this.state.mappings.map((function(e){return l.a.createElement("option",{key:e.mapping_id,value:e.mapping_id},e.mapping_name)})))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-4"},l.a.createElement("button",{className:"btn btn-primary",onClick:this.updateQuestionRequest},"Update Question"),l.a.createElement(s.b,{to:"/",className:"btn btn-default"},"Back")))))}}]),a}(l.a.Component),q=function(){return l.a.createElement(s.a,null,l.a.createElement(c.a,{exact:!0,path:"/"},l.a.createElement(f,null)),l.a.createElement(c.a,{path:"/questions/:id",exact:!0,component:E}),l.a.createElement(c.a,{path:"/questions/new",exact:!0,component:b}),l.a.createElement(c.a,{path:"/questions/:id/edit",exact:!0,component:C}))};var N=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(q,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(39);o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[25,1,2]]]);
//# sourceMappingURL=main.6d8125a6.chunk.js.map